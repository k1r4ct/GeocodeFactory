function clsGfMap2(e){this.map=null,this.mapID=null,this.imageWait=null,this.imageGalWait=null,this.imageGalClose=null,this.imageGalPrev=null,this.imageGalNext=null,this.imageShadow=null,this.iconeUser1=null,this.iconeUser2=null,this.iconeUser3=null,this.iconMyPos=null,this.dynRadIcoCenter=null,this.dynRadIcoDrag=null,this.dirService=null,this.dirDisplay=null,this.geocoder=new google.maps.Geocoder,this.mapOption={},this.centerPointDefault=new google.maps.LatLng(0,0),this.centerPointDefaultPhp=new google.maps.LatLng(0,0),this.radCircle=new google.maps.Circle,this.boundaries=new google.maps.LatLngBounds,this.autoComplete=null,this.useMemberPos=!1,this.useBrowserPos=!1,this.useBoundary=!1,this.useNoDoublon=!1,this.useNoTmplDoublon=!1,this.useRoutePlaner=!1,this.exclusiveView=!1,this.articleView=!1,this.useCluster=!1,this.useSelector=!1,this.useTabs=!1,this.useSideTemplate=0,this.drawRadiusCircle=!1,this.markerCluster=null,this.radUnit="km",this.radFact=1e3,this.dynRadDistMax=50,this.curProfileId=0,this.mapObjects=new Array,this.dataFile=null,this.xmlFileDyn=null,this.xmlSuffixe=null,this.xmlSuffixeCatDyn="",this.sourceData=new Array,this.curSelectorVal="",this.clickMarker="click",this.clickMarkerTrack="click",this.clickSales=0,this.trackZoom=!0,this.forceZoom=0,this.clusterMaxZoom=0,this.listIdForSide=null,this.strictCountTemplate=null,this.userCleanLoad=!1,this.cleanLoad=!1,this.vCommonPath=[],this.vBubbleWidth=[],this.maxMarkers=0,this.niveaupresent=0,this.colorSales="green",this.colorRadius="red",this.nameMapContainer="TYPE_gf_ID",this.nameWaitArea="gf_waitZone",this.nameSidelistPremium="gf_sidelistPremium",this.nameSidelists="gf_sidelists",this.nameSidebar="gf_sidebar",this.nameRadiusSelect="radiusSelect",this.nameAddressInput="addressInput",this.nameSelectorMS="gf_list_selector",this.nameMultiSelectorMS="gf_multi_selector",this.nameStreetView="gf_streetView",this.nameTransport="gf_transport",this.nameItineraire="gf_routepanel",this.nameDebugCont="gf_debugmode_xml",this.nameMjrsRefLat="mj_rs_ref_lat",this.nameMjrsRefLng="mj_rs_ref_lng",this.nanameMjrsRefRad="mj_rs_radius_selector",this.idsNoStreetView="No streetview available here.",this.dynRadTxtCenter="Move the center",this.dynRadTxtDrag="Move the radius size",this.newMethod=1,this.getMapUrl=function(e){return this.isDebugMode()&&console.log(gf_sr+commonUrl+"&task=map.getJson&"+e),gf_sr+commonUrl+"&task=map.getJson&"+e},this.checkMapData=function(e){return!(parseInt(e.id)<1)},this.setMapInfo=function(e,t){switch(this.nameMapContainer=t,this.mapID=e.id,this.setDefaultImages(e.common_image_path),this.idsNoStreetView=e.idsNoStreetView,this.dynRadTxtCenter=e.dynRadTxtCenter,this.dynRadTxtDrag=e.dynRadTxtDrag,this.colorSales=e.colorSales,this.colorRadius=e.colorRadius,this.colorRadius=e.colorRadius,this.newMethod=parseInt(e.newMethod),255!=e.ss_artLat&&(e.centerlat=e.ss_artLat,e.centerlng=e.ss_artLng,this.articleView=!0),this.setCenterPointDefault(parseFloat(e.centerlat),parseFloat(e.centerlng),parseFloat(e.centerlatPhpGc),parseFloat(e.centerlngPhpGc)),this.setMMZ(parseInt(e.minZoom),parseInt(e.maxZoom)),this.setMTB(e.mapTypeOnStart,parseInt(e.mapControl),e.mapTypeBar),this.setDWZ(parseInt(e.doubleClickZoom),parseInt(e.wheelZoom)),this.setMZC(parseInt(e.mapsZoom)),this.setSMC(e.mapTypeControl),this.setCTRL(parseInt(e.pegman),parseInt(e.scaleControl),parseInt(e.rotateControl),parseInt(e.overviewMapControl)),void 0!==e.niveaux&&(this.niveaupresent=parseInt(e.niveaux)),this.createMap(),this.setStyle(e.mapStyle),this.autoCompleteStart(e.acCountry,parseInt(e.acTypes)),this.addNote(parseInt(e.hideNote)),this.maxMarkers=parseInt(e.totalmarkers),this.setMouse(parseInt(e.bubbleOnOver),parseInt(e.salesRadMode),parseInt(e.trackOnOver),parseInt(e.trackZoom)),this.clusterMaxZoom=parseInt(e.endZoom),this.initCluster(parseInt(e.useCluster),this.clusterMaxZoom,parseInt(e.gridSize),e.imagePath,e.imageSizes,parseInt(e.minClustSize)),this.setUseRoutePlaner(parseInt(e.useRoutePlaner)),e.cleanLoad>0&&(this.userCleanLoad=!0,this.setCleanLoad()),(parseInt(e.radFormMode)>1||1==parseInt(e.templateAuto))&&jQuery("#gf_map_panel").length>0&&(this.map.controls[google.maps.ControlPosition.TOP_LEFT].push(document.getElementById("gf_map_panel")),jQuery("#gf_map_panel").slideDown("slow")),parseInt(e.forceZoom)>0&&(this.forceZoom=e.forceZoom),1==parseInt(e.ss_zoomMeProf)&&e.ss_zoomMeId>0&&this.setProfileView(e.ss_zoomMeId),this.dynRadDistMax=parseInt(e.dynRadDistMax),1==parseInt(e.drawCircle)&&(this.drawRadiusCircle=!0),1==parseInt(e.fe_rad_unit)&&this.setRadiusUnit("mi",1609,3959),2==parseInt(e.fe_rad_unit)&&this.setRadiusUnit("nm",1852,3440),1==parseInt(e.allowDbl)&&(this.useNoDoublon=!0),3==parseInt(e.allowDbl)&&(this.useNoTmplDoublon=!0),parseInt(e.centerUser)){case 1:this.useMemberPos=!0;break;case 2:this.useBrowserPos=!0,this.centerMapOnBrowser();break;case 3:this.useBoundary=!0}this.manageMapClick(parseInt(e.clickRadius)),1==parseInt(e.useTabs)&&(this.useTabs=!0);var s=this;google.maps.event.addListenerOnce(this.map,"idle",function(){s.refreshMap()}),this.useBoundary||(google.maps.event.addListener(this.map,"dragend",function(){s.refreshMap()}),google.maps.event.addListener(this.map,"zoom_changed",function(){s.refreshMap()}))},this.setDefaultImages=function(e){this.imageGalWait=e+"icon_wait.gif",this.imageShadow=e+"marker_avatar.gif",this.dynRadIcoCenter=e+"dynRadCenter.png",this.dynRadIcoDrag=e+"dynRadSizer.png",this.imageWait='<img src="'+this.imageGalWait+'" />',this.setIconMyPos(e+"locate_me.gif")},this.setCenterPointDefault=function(e,t,s,i){this.centerPointDefaultPhp=new google.maps.LatLng(parseFloat(s),parseFloat(i)),this.centerPointDefault=new google.maps.LatLng(parseFloat(e),parseFloat(t)),0==s&&0==i&&(this.centerPointDefaultPhp=this.centerPointDefault)},this.setMouse=function(e,t,s,i){1==e&&(this.clickMarker="mouseover"),2==e&&(this.clickMarker="rightclick"),3==e&&(this.clickMarker=3),1==t&&(this.clickSales="click"),2==t&&(this.clickSales="rightclick"),3==t&&(this.clickSales="mouseover"),1==s&&(this.clickMarkerTrack="mouseover"),2==s&&(this.clickMarkerTrack="rightclick"),3==s&&(this.clickMarkerTrack=3),1==i&&(this.trackZoom=!1)},this.setCleanLoad=function(){this.userCleanLoad&&(this.cleanLoad=!0)},this.selectRadiusVal=function(e){e>0&&jQuery("#"+this.nameRadiusSelect).val(e)},this.setRadiusUnit=function(e,t,s){this.radUnit=e,this.radFact=t,rayonterre=s},this.setProfileView=function(e){this.exclusiveView=!0,this.curProfileId=e},this.setCTRL=function(e,t,s,i){this.mapOption.streetViewControl=1==e,this.mapOption.scaleControl=1==t,this.mapOption.rotateControl=1==s,this.mapOption.overviewMapControl=1==i},this.setMMZ=function(e,t){t=parseInt(t),e=parseInt(e),t<1||e<1||(t<=e?(this.mapOption.minZoom=t,this.mapOption.maxZoom=e):(this.mapOption.minZoom=e,this.mapOption.maxZoom=t))},this.setMTB=function(e,t,s){switch(e){case"HYBRID":this.mapOption.mapTypeId=google.maps.MapTypeId.HYBRID;break;case"ROADMAP":this.mapOption.mapTypeId=google.maps.MapTypeId.ROADMAP;break;case"SATELLITE":this.mapOption.mapTypeId=google.maps.MapTypeId.SATELLITE;break;default:case"TERRAIN":this.mapOption.mapTypeId=google.maps.MapTypeId.TERRAIN}0!=t?(this.mapOption.mapTypeControl=!0,this.mapOption.mapTypeControlOptions={style:google.maps.MapTypeControlStyle.mTypeBar}):this.mapOption.mapTypeControl=!1},this.setDWZ=function(e,t){this.mapOption.disableDoubleClickZoom=1!=e,this.mapOption.scrollwheel=1==t},this.setSMC=function(e){if(0==e)return this.mapOption.zoomControl=!1,void(this.mapOption.panControl=!1);this.mapOption.zoomControl=!0,this.mapOption.panControl=!0,this.mapOption.zoomControlOptions={style:google.maps.ZoomControlStyle.mCtrl}},this.setMZC=function(e){((e=parseInt(e))>24||e<1)&&(e=14),this.mapOption.center=this.centerPointDefault,this.mapOption.zoom=e},this.setStyle=function(e){e&&e.length>0&&(e=JSON.parse(e),this.map.setOptions({styles:e}))},this.createMap=function(){document.getElementById(this.nameMapContainer)||console.log("Map div unknown: "+this.nameMapContainer),this.map=new google.maps.Map(document.getElementById(this.nameMapContainer),this.mapOption),google.maps.event.trigger(this.map,"resize"),this.map.controls[google.maps.ControlPosition.TOP_CENTER].push(document.getElementById("gf_icon_wait_map")),document.getElementById("gf_sideTemplateCtrl")&&this.map.controls[google.maps.ControlPosition.TOP_RIGHT].push(FullScreenControl(this.map,'<i class="glyphicon glyphicon-fullscreen"></i>','<i class="glyphicon glyphicon-resize-small"></i>')),google.maps.event.addListenerOnce(this.map,"idle",function(){if(jQuery("#gf_mm_parent"))try{moveMap(1)}catch(e){}})},this.setIconMyPos=function(e){this.iconMyPos=new google.maps.MarkerImage(e,new google.maps.Size(32,32),new google.maps.Point(0,0),new google.maps.Point(16,16))},this.autoCompleteStart=function(e,t){if(!(jQuery("#"+this.nameAddressInput).length<1)){var s="";1==t&&(s="establishment"),2==t&&(s="geocode"),3==t&&(s="(cities)");var i={};s.length>1&&(i.types=[s]),e.length>1&&(i.componentRestrictions={country:e});var a=document.getElementById(this.nameAddressInput);this.autocomplete=new google.maps.places.Autocomplete(a,i),this.autocomplete.bindTo("bounds",this.map);var r=this;google.maps.event.addListener(this.autocomplete,"place_changed",function(){r.searchFromRadiusForm()}),me=this,"function"==typeof onMapLoaded&&onMapLoaded(me)}},this.addNote=function(e){e<1||(copyrightNode=document.createElement("div"),copyrightNode.id="gf_note-control",copyrightNode.style.fontSize="10px",copyrightNode.style.fontFamily="Arial, sans-serif",copyrightNode.style.margin="0 2px 2px 0",copyrightNode.style.whiteSpace="nowrap",copyrightNode.index=0,copyrightNode.innerHTML='<a href="http://www.myjoom.com" target="_blank">Map & Markers</a>',this.map.controls[google.maps.ControlPosition.BOTTOM_RIGHT].push(copyrightNode))},this.initCluster=function(e,t,s,i,a,r){if(1==e){this.useCluster=!0;var o={maxZoom:t,gridSize:s,minimumClusterSize:r};i.length>0&&(o.imagePath=i,a.length>0&&(o.imageSizes=a.split(","))),"undefined"!=typeof MarkerClusterer?(this.markerCluster=new MarkerClusterer(this.map,[],o),this.markerCluster.onClick=function(e){return multiChoice(e.cluster_,this.map)}):this.useCluster=!1}else this.useCluster=!1},this.setClusters=function(){if(this.useCluster){if(this.markerCluster&&(this.markerCluster.clearMarkers(),this.markerCluster.setMap(null),this.markerCluster.setMap(this.map)),ggMarkers=[],gfMarkers.length>0)for(var e in gfMarkers)null!=gfMarkers[e].ggMarker&&gfMarkers[e].ggMarker.getVisible()&&(gfMarkers[e].ggMarker.tmpImageWait=this.imageWait,gfMarkers[e].ggMarker.tmpMarkerDist=gfMarkers[e].distance,gfMarkers[e].ggMarker.tmpBubleWidth=gfMarkers[e].width,gfMarkers[e].ggMarker.tmpMarkerId=gfMarkers[e].id,gfMarkers[e].ggMarker.tmpListId=gfMarkers[e].liste,ggMarkers.push(gfMarkers[e].ggMarker));this.markerCluster.addMarkers(ggMarkers)}},this.setUseRoutePlaner=function(e){e<1||(this.useRoutePlaner=!0,this.dirService=new google.maps.DirectionsService,this.dirDisplay=new google.maps.DirectionsRenderer,this.dirDisplay.setPanel(document.getElementById(this.nameItineraire)),this.dirDisplay.setMap(this.map))},this.loadDynCat=function(e,t,s,i){axLoadDyncat(e,t,s,i)},this.addKmlLayer=function(e){new google.maps.KmlLayer(e,{map:this.map,preserveViewport:!0})},this.manageMapClick=function(e){var t=this;return 1==e?(google.maps.event.addListener(this.map,"rightclick",function(e){iw&&iw.close(),iw=new google.maps.InfoWindow}),void google.maps.event.addListener(this.map,"click",function(e){iw&&iw.close(),iw=new google.maps.InfoWindow,t.searchLocationsFromPoint(e.latLng)})):2==e?(google.maps.event.addListener(this.map,"rightclick",function(e){iw&&iw.close(),iw=new google.maps.InfoWindow,t.searchLocationsFromPoint(e.latLng)}),void google.maps.event.addListener(this.map,"click",function(e){iw&&iw.close(),iw=new google.maps.InfoWindow})):(google.maps.event.addListener(this.map,"rightclick",function(e){iw&&iw.close(),iw=new google.maps.InfoWindow}),void google.maps.event.addListener(this.map,"click",function(e){iw&&iw.close(),iw=new google.maps.InfoWindow}))},this.justZoomIn=function(){if(0==oldZoom)return oldZoom=this.map.getZoom(),!1;var e=!1;return this.map.getZoom()>oldZoom&&(e=!0),this.map.getZoom()<=this.clusterMaxZoom+1&&(e=!1),oldZoom=this.map.getZoom(),e},this.refreshMap=function(e){if(this.showWaiter(),gf_mod_search.length>0)return jQuery("#"+this.nameAddressInput).val(gf_mod_search),jQuery("#"+this.nameRadiusSelect).val(gf_mod_radius),gf_mod_search="",gf_mod_radius="",void this.searchFromRadiusForm();!this.justZoomIn()||e?this.reloadAndRefreshMap():this._refreshMap()},this.reloadAndRefreshMap=function(){this.showWaiter(),this.createDataUrl();var e=this;jQuery.getJSON(this.dataFile,function(t){localdata=t,e._refreshMap()})},this._refreshMap=function(){localdata?(this.readDataFromJson(localdata),this.cleanMapObjects(),this.drawMapObjects(),firstmapload&&this.useBoundary&&!this.boundaries.isEmpty()&&(this.map.fitBounds(this.boundaries),""!=componentItemCenterPoint&&(this.map.panTo(componentItemCenterPoint),this.map.setZoom(this.forceZoom)),this.newMethod<2&&(firstmapload=!1)),this.setClusters(),updateCounter(),this.loadSidelistFromTemplate()):console.log("No local datafile.")},this.createDataUrl=function(){this.getValueOfSelectors();var e="";this.curProfileId<1&&(e+="&bo="+this.map.getBounds().toUrlValue(6)),e+="&cz="+this.map.getZoom(),e+="&lst="+this.curSelectorVal.toString(),this.useSelector&&(e+=",uselist"),e+="&zmid="+zmid,e+="&tmty="+tmty,e+="&gfcc="+gfcc,dynCatLastExt&&dynCatLastId&&dynCatLastExt.length>0&&dynCatLastId>0&&(e+="&fc="+dynCatLastId.toString(),e+="&ext="+dynCatLastExt.toString()),mj_radiuscenter&&mj_radiuscenter&&mj_radiusdistance>0&&0!=mj_radiuscenter.lat()&&0!=mj_radiuscenter.lng()&&(e+="&lat="+mj_radiuscenter.lat().toString(),e+="&lng="+mj_radiuscenter.lng().toString(),e+="&rad="+mj_radiusdistance.toString()),this.useBoundary&&(e+="&allM=1"),this.dataFile=gf_sr+commonUrl+"&task=markers.getJson&idmap="+this.mapID+e,this.isDebugMode()&&(jQuery("#"+this.nameDebugCont).html("data file"),jQuery("#"+this.nameDebugCont).attr("href",this.dataFile))},this.readDataFromJson=function(e){this.sourceData=new Array,this.sourceData.listes=this.extractLists(e.lists),this.sourceData.markers=this.extractMarkers(e.markers),this.sourceData.plines=this.extractPlines(e.plines),this.sourceData.spec=this.extractSpecial(e.spec),this.sourceData.cluster=this.extractCluster(e.cluster)},this.cleanMapObjects=function(){if(this.cleanSide(this.nameSidelistPremium),this.cleanSide(this.nameSidelists),this.cleanSide(this.nameSidebar),numberofMarkers=0,gfMarkers=new Array,isValidArray(this.mapObjects))for(var e=0;e<this.mapObjects.length;e++)this.mapObjects[e].setMap(null);this.mapObjects=new Array},this.drawMapObjects=function(){this.listIdForSide=new Array,2==this.newMethod&&(this.boundaries=new google.maps.LatLngBounds);var e=this.drawMapObject(this.sourceData.cluster);e>0?numberofMarkers=e:(this.drawMapObject(this.sourceData.markers,!0),this.drawMapObject(this.sourceData.plines),this.addPlaces(this.sourceData.spec),numberofMarkers+=this.sourceData.markers.length)},this.drawMapObject=function(e,t){var s=0;if(isValidArray(e)){for(var i=0;i<e.length;i++){s+=e[i].nbr&&e[i].nbr>0?e[i].nbr:0;var a=e[i].draw(this.map,this.mapObjects,this.boundaries);t&&(gfMarkers.push(a),this.setMarkerInSide(a))}return s>0?s:e.length}return 0},this.extractLists=function(e){var t=new Array;if(e)for(var s=0;s<e.length;s++){var i=new clsGfList(e[s],this.niveaupresent);t.push(i),i.commonIconPath.length>2&&(this.vCommonPath[i.id]=i.commonIconPath),this.vBubbleWidth[i.id]=i.bubblewidth,i.useSide>0&&i.useSide>this.useSideTemplate&&(this.useSideTemplate=i.useSide)}return t},this.extractMarkers=function(e){componentItemCenterPoint="";var t=new Array;if(e)for(var s=0;s<e.length;s++){var i=this,a=new clsGfMarker(e[s],i);if(void 0!==this.vCommonPath[a.liste]&&a.icon.length>3&&(a.icon=this.vCommonPath[a.liste]+a.icon),a.width=this.vBubbleWidth[a.liste],this.useNoDoublon&&s>0){var r=!0;if(t.length>0)for(var o in t)if(t[o].type==a.type&&t[o].id==a.id){r=!1;break}if(!r)continue}t.push(a)}return t},this.extractSpecial=function(e){var t=new Array;if(e)for(var s=0;s<e.length;s++)if(e[s].pt){var i=new clsGfSpecial(e[s],this.vCommonPath);t.push(i)}else console.log("GooglePlace markerset error: no types defined!");return t},this.extractPlines=function(e){var t=new Array;if(e)for(var s=0;s<e.length;s++){var i=new clsGfPline(e[s],this);t.push(i)}return t},this.extractCluster=function(e){var t=new Array;if(!e)return t;for(var s=0;s<e.length;s++){var i=new clsGfCluster(e[s]);t.push(i)}return t},this.drawRadius=function(){if(this.boundaries=new google.maps.LatLngBounds,this.radCircle&&this.radCircle.setMap(null),mj_radiusdistance=-1,jQuery("#"+this.nameRadiusSelect).length>0&&(mj_radiusdistance=parseInt(jQuery("#"+this.nameRadiusSelect).val())),this.drawRadiusCircle&&!(mj_radiusdistance<=0)){if("function"==typeof DistanceWidget){var e=this;this.radCircle=new DistanceWidget(e,mj_radiuscenter),distanceWidget=this.radCircle,google.maps.event.addListener(this.radCircle,"distance_changed",function(){displayInfo(distanceWidget)}),google.maps.event.addListener(this.radCircle,"position_changed",function(){displayInfo(distanceWidget)})}else this.radCircle=new google.maps.Circle({map:this.map,center:mj_radiuscenter,radius:mj_radiusdistance*this.radFact,strokeOpacity:1,strokeWeight:2,strokeColor:this.colorRadius,fillColor:this.colorRadius,fillOpacity:.15});this.boundaries.isEmpty()?this.map.fitBounds(this.radCircle.getBounds()):this.map.fitBounds(this.boundaries)}},this.searchFromRadiusForm=function(){address=jQuery("#"+this.nameAddressInput).val();var e=this;this.geocoder.geocode({address:address},function(t,s){s==google.maps.GeocoderStatus.OK?(mj_radiuscenter=t[0].geometry.location,e.drawRadius(),e.reloadAndRefreshMap()):alert("Geocode was not successful for the following reason: "+s)})},this.searchLocationsFromPoint=function(e){mj_radiuscenter=e,this.drawRadius(),this.reloadAndRefreshMap()},this.isDebugMode=function(){return!!(this.nameDebugCont&&jQuery("#"+this.nameDebugCont).length>0)},this.addPlaces=function(){if(this.sourceData.spec.length<1)return 0;for(var e=0;e<this.sourceData.spec.length;e++){var t={};t.liste=this.sourceData.spec[e].liste;var s=this.sourceData.spec[e];t.map=this.map,t.types=s.accom,t.icon=s.icon,t.max=s.max,t.mode=s.mode,t.openNow=s.open,t.imageWait=this.imageWait,mj_radiusdistance<=0||null==mj_radiuscenter||0==mj_radiuscenter.lat()&&0==mj_radiuscenter.lng()?t.bounds=this.map.getBounds():(t.radius=mj_radiusdistance*this.radFact-mj_radiusdistance*this.radFact/10,t.location=mj_radiuscenter),searchPlaces(t,this.mapObjects)}},this.getValueOfSelectors=function(){this.curSelectorVal=new Array,jQuery("#"+this.nameMultiSelectorMS).length>0&&(this.curSelectorVal=jQuery("#"+this.nameMultiSelectorMS).val()||[],this.useSelector=!0),jQuery("#gf_toggeler").length>0&&(this.useSelector=!0);var e=this.curSelectorVal;jQuery("#gf_toggeler input:checked").each(function(){e.push(this.name)}),this.curSelectorVal=e,jQuery("#"+this.nameSelectorMS).length>0&&(jQuery("#"+this.nameSelectorMS).val().length>1||"0"==jQuery("#"+this.nameSelectorMS).val())&&this.curSelectorVal.push(jQuery("#"+this.nameSelectorMS).val())},this.setMarkerInSide=function(e){jQuery("#"+this.nameSidelists).length>0&&this.createSidebarEntry(e,"gf_sidelists"),jQuery("#"+this.nameSidebar).length>0&&this.createSidebarEntry(e,"gf_sidebar"),jQuery("#"+this.nameSidelistPremium).length>0&&this.createSidebarEntry(e,"gf_sidelistPremium")},this.cleanSide=function(e){jQuery("#"+e).length>0&&jQuery("#"+e).html("")},this.createSidebarEntry=function(e,t){var s="gf_list_"+e.type+"_id_"+e.liste,i="gf_list_"+e.type+"_id_"+e.liste+"_idMarker_"+e.id,a=document.createElement("div"),r=e.name;if(e.distance=Math.round(100*e.distance)/100,"gf_sidelistPremium"==t&&(s="gf_list_Premium_"+e.liste,i="gf_list_Premium_idMarker_"+e.id),e.distance>0&&(r=r+" ("+e.distance+this.radUnit+" )"),a.innerHTML=r,a.title=r,a.id=i,a.className="gf_list_item",3!=this.clickMarker&&(a.style.cursor="pointer"),a.style.marginTop="5px",a.style.width="95%",a.onclick=function(){google.maps.event.trigger(e.ggMarker,"click"),google.maps.event.trigger(e.ggMarker,"rightclick")},this.useSideTemplate>0&&(a.innerHTML="",a.title=""),document.getElementById(s))document.getElementById(s).appendChild(a);else{var o=this.getListName(e),n=document.createElement("div");r='<h5 class="gf-sidelist-heading">'+o+"</h5>",n.id=s,n.className="gf_list_parent",n.innerHTML=r,this.useSideTemplate>0&&1==this.useNoTmplDoublon&&(n.innerHTML="",n.title=""),"gf_sidelists"==t?n.setAttribute("style","padding:2px; min-width:150px;max-height:400px;overflow:scroll; word-wrap:break-word;"):"gf_sidebar"==t?n.setAttribute("style","padding:2px; min-width:150px;word-wrap:break-word; "):"gf_sidelistPremium"==t&&n.setAttribute("style","padding:2px;word-wrap:break-word;"),n.appendChild(a),document.getElementById(t).appendChild(n)}if(1==this.useSideTemplate&&axGetSideItem(e.id,e.liste,e.distance,i,this.isDebugMode()),2==this.useSideTemplate){if(1==this.useNoTmplDoublon){var l=e.type+"_id_"+e.id;if(inArrayMj(l,this.strictCountTemplate))return;this.strictCountTemplate.push(l)}this.listIdForSide[e.liste+"#"+i]||(this.listIdForSide[e.liste+"#"+i]=new Array),e.ggMarker.getVisible()&&(this.listIdForSide[e.liste+"#"+i].push(e.id),this.listIdForSide[e.liste+"#"+i].push(e.distance))}},this.getListName=function(e){for(var t=0;t<this.sourceData.listes.length;t++)if(this.sourceData.listes[t].type==e.type&&this.sourceData.listes[t].id==e.liste)return this.sourceData.listes[t].name;return"Listing"},this.loadSidelistFromTemplate=function(){if(!(this.useSideTemplate<2))for(var e in this.listIdForSide)if(this.listIdForSide.hasOwnProperty(e)){var t=e.split("#");axGetSideItemOnce(t[0],this.listIdForSide[e],t[1],this.isDebugMode())}},this.getBrowserPos=function(e,t){map=this.map;var s=this;iconMyPos=this.iconMyPos,defautPos=this.centerPointDefaultPhp,3==arguments.length&&(defautPos=arguments[2]),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(i){mj_radiuscenter=new google.maps.LatLng(parseFloat(i.coords.latitude),parseFloat(i.coords.longitude)),s.updateRadFormFromPoint(s.nameAddressInput),t&&(jQuery("#"+s.nameAddressInput).val(mj_radiuscenter.toString().match(/[^()]+/)),s.SLFI()),onsuccessBrowserPos(map,mj_radiuscenter,e,iconMyPos)},function(){t&&(jQuery("#"+s.nameAddressInput).val(mj_radiuscenter.toString()),s.SLFI()),onsuccessBrowserPos(map,defautPos,e,iconMyPos)}):google.gears?google.gears.factory.create("beta.geolocation").getCurrentPosition(function(i){mj_radiuscenter=new google.maps.LatLng(i.latitude,i.longitude),s.updateRadFormFromPoint(s.nameAddressInput),t&&(jQuery("#"+s.nameAddressInput).val(mj_radiuscenter.toString().match(/[^()]+/)),s.SLFI()),onsuccessBrowserPos(map,mj_radiuscenter,e,iconMyPos,t)},function(){t&&(jQuery("#"+s.nameAddressInput).val(mj_radiuscenter.toString()),s.SLFI()),onsuccessBrowserPos(map,defautPos,e,iconMyPos)}):(map.panTo(defautPos),alert("Geocode not supported by this browser."))},this.updateRadFormFromPoint=function(e){var t=Math.round(100*mj_radiuscenter.lat())/100+","+Math.round(100*mj_radiuscenter.lng())/100;this.geocoder.geocode({latLng:mj_radiuscenter},function(t,s){if(s==google.maps.GeocoderStatus.OK){if(t[0])return void jQuery("#"+e).val(t[0].formatted_address)}else console.log("status:"+s)}),jQuery("#"+this.nameAddressInput).val(t)},this.centerMapOnBrowser=function(){this.exclusiveView||this.articleView||this.getBrowserPos(!1,!1)},this.showWaiter=function(){numberofMarkers=0,jQuery("#gf_NbrMarkersPre").length>0&&(this.nameWaitArea="gf_NbrMarkersPre"),jQuery("#"+this.nameWaitArea).html(this.imageWait)},this.SLFI=function(){this.searchFromRadiusForm(),this.refreshMap(!0)},this.SLFP=function(){this.refreshMap(!0)},this.SLRES=function(){this.setCleanLoad(),this.radCircle&&this.radCircle.setMap(null),mj_radiuscenter=null,this.refreshMap(!0)},this.SLFDYN=function(e,t){dynCatLastId=jQuery("#"+e.id).val(),dynCatLastExt=t,this.refreshMap(!0)},this.LMBTN=function(){this.getBrowserPos(!0,!1)},this.NMBTN=function(){this.getBrowserPos(!1,!0)},this.LAYSEL=function(){lay_traffic||(lay_traffic=new google.maps.TrafficLayer),lay_transit||(lay_transit=new google.maps.TransitLayer),lay_bicycle||(lay_bicycle=new google.maps.BicyclingLayer),jQuery("#gf_l_traffic").prop("checked")?lay_traffic.setMap(this.map):lay_traffic.setMap(null),jQuery("#gf_l_transit").prop("checked")?lay_transit.setMap(this.map):lay_transit.setMap(null),jQuery("#gf_l_bicycle").prop("checked")?lay_bicycle.setMap(this.map):lay_bicycle.setMap(null)}}
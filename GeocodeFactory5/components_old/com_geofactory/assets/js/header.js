function sleepMulti(a){for(var b=(new Date).getTime();b+a>=(new Date).getTime(););repos+=500}function js_array_interset(a,b){for(var c=new Array;a.length>0&&b.length>0;)a[0]<b[0]?a.shift():a[0]>b[0]?b.shift():(c.push(a.shift()),b.shift());return c}function inArrayMj(a,b){for(var c=b.length,d=0;d<c;d++)if(b[d]==a)return!0;return!1}function isCustomSize(a,b){return!(a<1)&&!(b<1)}function getDistanceBetweenPoints(a,b){if(!a||!b)return-1;var c=rayonterre,d=(b.lat()-a.lat())*Math.PI/180,e=(b.lng()-a.lng())*Math.PI/180,f=Math.sin(d/2)*Math.sin(d/2)+Math.cos(a.lat()*Math.PI/180)*Math.cos(b.lat()*Math.PI/180)*Math.sin(e/2)*Math.sin(e/2);return c*(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)))}function isInRadius(a){if(mj_radiusdistance<=0||null==mj_radiuscenter||0==mj_radiuscenter.lat()&&0==mj_radiuscenter.lng())return!0;if(a.ggMarker&&"undefined"!=a.ggMarker){var b=a.distance,c=parseFloat(mj_radiusdistance)+parseFloat(a.salesRad);if(-1==b||b>c)return!1}else{var b=getDistanceBetweenPoints(mj_radiuscenter,a);if(-1==b||b>parseFloat(mj_radiusdistance))return!1}return!0}function isValidArray(a){return void 0!==a&&a instanceof Array&&a.length>0}function axGetMultiBubble(a,b,c,d){var e;try{"undefined"!=typeof ActiveXObject?e=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(e=new XMLHttpRequest)}catch(a){}var f=gf_sr+commonUrl+"&task=marker.bubbleMulti&idsDists="+JSON.stringify(d)+"&idL="+c;e.open("GET",f,!0),e.onreadystatechange=function(){if(4==e.readyState){var c=e.responseText;iw.setContent(c),iw.open(a,b)}},e.send(null)}function axGetBubble(a,b,c,d,e,f,g){var h;try{"undefined"!=typeof ActiveXObject?h=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(h=new XMLHttpRequest)}catch(a){}"function"==typeof onBubbleOpen&&onBubbleOpen(f,e);var i=gf_sr+commonUrl+"&task=marker.bubble&idU="+b+"&idL="+c+"&dist="+d+"&pt="+e.getPosition().lat()+","+e.getPosition().lng();g&&console.log(i),h.open("GET",i,!0),document.getElementById("gf_debugmode_bubble")&&(document.getElementById("gf_debugmode_bubble").innerHTML="bubble link",document.getElementById("gf_debugmode_bubble").href=i),h.onreadystatechange=function(){if(4==h.readyState){var b=h.responseText;a.setContent(b),a.open(f,e)}},h.send(null)}function axGetSideItem(a,b,c,d,e){var f;try{"undefined"!=typeof ActiveXObject?f=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(f=new XMLHttpRequest)}catch(a){}jQuery("#"+d).fadeOut("slow");var g=gf_sr+commonUrl+"&task=marker.side&idU="+a+"&idL="+b+"&dist="+c;e&&console.log(g),f.open("GET",g,!0),document.getElementById("gf_debugmode_side_item")&&(document.getElementById("gf_debugmode_side_item").innerHTML="Sidelist link",document.getElementById("gf_debugmode_bubble").href=g),f.onreadystatechange=function(){if(4==f.readyState){f.responseText.length>0&&(jQuery("#"+d).html(f.responseText),jQuery("#"+d).fadeIn("slow"))}},f.send(null)}function axGetSideItemOnce(a,b,c,d){var e;try{"undefined"!=typeof ActiveXObject?e=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(e=new XMLHttpRequest)}catch(a){}jQuery("#"+c).fadeOut("slow");var f=gf_sr+commonUrl+"&task=marker.fullSide&idsDists="+JSON.stringify(b)+"&idL="+a;d&&console.log(f),e.open("GET",f,!0),document.getElementById("gf_debugmode_side_item")&&(document.getElementById("gf_debugmode_side_item").innerHTML="Sidelist link",document.getElementById("gf_debugmode_bubble").href=f),e.onreadystatechange=function(){if(4==e.readyState){e.responseText.length>0&&(jQuery("#"+c).html(e.responseText),jQuery("#"+c).fadeIn("slow"))}},e.send(null)}function axLoadDyncat(a,b,c,d){var e;try{"undefined"!=typeof ActiveXObject?e=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(e=new XMLHttpRequest)}catch(a){}var f=gf_sr+commonUrl+"&task=markers.dyncat&ext="+a+"&idP="+b+"&mapVar="+d;e.open("GET",f,!0),e.onreadystatechange=function(){if(4==e.readyState){e.responseText.length>0&&(jQuery("#"+c).html(e.responseText),jQuery("#"+c).fadeIn("slow"))}},e.send(null)}function axSavePos(a,b,c,d){var f,e=d||!1;try{"undefined"!=typeof ActiveXObject?f=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(f=new XMLHttpRequest)}catch(a){}document.getElementById(c.nameWaitArea).innerHTML=c.imageWait,f.open("GET",gf_sr+"index.php?option=com_geocode_factory&task=axSaveMyPosition&lat="+a+"&lng="+b+"&fetchaddress="+e,!0),f.onreadystatechange=function(){if(4==f.readyState){var a=f.responseText;document.getElementById(c.nameWaitArea).innerHTML=a,jQuery("#"+c.nameWaitArea).html(),c.SLFP()}},f.send(null)}function onsuccessBrowserPos(a,b,c,d){a.panTo(b),c&&(locateMarker&&locateMarker.setMap(null),locateMarker=new google.maps.Marker({position:b,icon:d,map:a,draggable:!0}),a.setZoom(17))}function updateCounter(){jQuery("#gf_waitZone").html(""),jQuery("#gf_NbrMarkersPre").length>0&&(jQuery("#gf_NbrMarkersPre").fadeTo("fast",1),jQuery("#gf_NbrMarkersPre").html(numberofMarkers))}function superFull(a){var b=a.getDiv(),c=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;b.style.width=c-20+"px",document.getElementById("gf_sideTemplateCtrl").style.display="none";var f=document.getElementById("gf_panelback");f.style.display="block",f.style.width="20px",google.maps.event.trigger(a,"resize")}function normalFull(a){a.getDiv().style.width="80%";var c=document.getElementById("gf_sideTemplateCtrl");c.style.display="block",c.style.width="20%",document.getElementById("gf_panelback").style.display="none",document.getElementById("gf_btn_superfull").style.display="block",google.maps.event.trigger(a,"resize")}function FullScreenControl(a,b,c){var d=[];void 0===b&&(b=null),void 0===c&&(c=null),null==b&&(b="Full screen"),null==c&&(c="Exit full screen");var e=document.createElement("div");e.className="fullScreen",e.index=1,e.style.padding="5px";var f=document.createElement("div");f.style.backgroundColor="white",f.style.borderStyle="solid",f.style.borderWidth="1px",f.style.borderColor="#717b87",f.style.cursor="pointer",f.style.textAlign="center",f.style.boxShadow="rgba(0, 0, 0, 0.298039) 0px 1px 4px -1px",e.appendChild(f);var g=document.createElement("div");g.style.fontFamily="Roboto,Arial,sans-serif",g.style.fontSize="11px",g.style.fontWeight="400",g.style.paddingTop="1px",g.style.paddingBottom="1px",g.style.paddingLeft="6px",g.style.paddingRight="6px",g.innerHTML="<strong>"+b+"</strong>",f.appendChild(g);var h=document.getElementsByTagName("head")[0],i=document.createElement("style");i.setAttribute("type","text/css"),i.setAttribute("media","print");var j=".fullScreen { display: none;}",k=document.createTextNode(j);try{i.appendChild(k)}catch(a){i.styleSheet.cssText=j}h.appendChild(i);var m,l=!1,n=a.getDiv(),o=n.style;n.runtimeStyle&&(o=n.runtimeStyle);var p=o.position,q=o.width,r=o.height;""===q&&(q=n.style.width),""===r&&(r=n.style.height);var s=o.top,t=o.left,u=o.zIndex,v=document.body.style;document.body.runtimeStyle&&(v=document.body.runtimeStyle);var w=v.overflow;return e.goFullScreen=function(){var b=a.getCenter();n.style.position="fixed",n.style.width="80%",n.style.height="100%",n.style.top="0",n.style.left="0",n.style.zIndex="100",document.body.style.overflow="hidden",g.innerHTML="<strong>"+c+"</strong>",l=!0,google.maps.event.trigger(a,"resize"),a.setCenter(b);var e=document.getElementById("gf_sideTemplateCtrl");d.position=e.style.position,d.width=e.style.width,d.height=e.style.height,d.top=e.style.top,d.right=e.style.right,d.zIndex=e.style.zIndex,e.style.position="fixed",e.style.width="20%",e.style.height="100%",e.style.top="0",e.style.right="0",e.style.zIndex="100",document.getElementById("gf_btn_superfull").style.display="block",m=setInterval(function(){"fixed"!==n.style.position&&(n.style.position="fixed",google.maps.event.trigger(a,"resize"))},100)},e.exitFullScreen=function(){var c=a.getCenter();n.style.position=""===p?"relative":p,n.style.width=q,n.style.height=r,n.style.top=s,n.style.left=t,n.style.zIndex=u,document.body.style.overflow=w,g.innerHTML="<strong>"+b+"</strong>",l=!1,google.maps.event.trigger(a,"resize"),a.setCenter(c);var e=document.getElementById("gf_sideTemplateCtrl");e.style.position=d.position,e.style.width=d.width,e.style.height=d.height,e.style.top=d.top,e.style.right=d.right,e.style.zIndex=d.zIndex,e.style.display="block",document.getElementById("gf_panelback").style.display="none",document.getElementById("gf_btn_superfull").style.display="none",jQuery("#gf_sideTemplateCtrl").prependTo("#gf_sideTemplateCont"),clearInterval(m)},google.maps.event.addDomListener(f,"click",function(){l?e.exitFullScreen():e.goFullScreen()}),e}var panoramaOptions,locateMarker,lay_traffic,lay_transit,lay_bicycle,numberofMarkers=0,commonUrl="index.php?option=com_geofactory",localdata,oldZoom=0,mj_radiuscenter,mj_radiusdistance,rayonterre=6371,distanceWidget,distWidgetTimer,kmlGpsTool,lastSalesCircle,iw=new google.maps.InfoWindow,gpMarkers=new Array,gpPlaces,dynCatLastExt,dynCatLastId,componentItemCenterPoint="",repos=0,firstmapload=!0,indexOf=function(a){return indexOf="function"==typeof Array.prototype.indexOf?Array.prototype.indexOf:function(a){var b=-1,c=-1;for(b=0;b<this.length;b++)if(this[b]===a){c=b;break}return c},indexOf.call(this,a)};Array.prototype.getUnique=function(){for(var a={},b=[],c=0,d=this.length;c<d;++c)a.hasOwnProperty(this[c])||(b.push(this[c]),a[this[c]]=1);return b};
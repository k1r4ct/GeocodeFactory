function clsTile(a,b,c,d,e){this.name=a,this.size=b,this.png=c,this.zoom=d,this.alt=e,this.fct=null,this.createTile=function(a){var b=new google.maps.ImageMapType({getTileUrl:this.fct,tileSize:new google.maps.Size(this.size,this.size),isPng:this.png,maxZoom:this.zoom,name:this.name,alt:this.alt});a.mapTypes.set(this.name,b)},this.getBingUrl=function(a,b,c){function g(a,b){for(;a.length<b;)a="0"+a;return a}for(var d=g(String(b.x.toString(2)),c+1),e=g(String(b.y.toString(2)),c+1),f="",h=0;h<e.length;h+=1)f+=e[h]+d[h];return f=parseInt("0"+f,2),a+g(f.toString(4),c)+".jpeg?g=915&mkt=en-us&n=z"}}function clsGfCluster(a){this.lat=a.la,this.lng=a.ln,this.icon=a.mi,this.empty=a.em,this.nbr=a.nb,this.point=new google.maps.LatLng(parseFloat(this.lat),parseFloat(this.lng)),this.boundary=new google.maps.LatLng(parseFloat(this.lat),parseFloat(this.lng)),this.ggMarker=null,this.imgsize=a.is,this.draw=function(a,b,c){var d=new google.maps.MarkerImage(this.empty,new google.maps.Size(this.imgsize,this.imgsize),new google.maps.Point(0,0),new google.maps.Point(this.imgsize/2,this.imgsize/2),new google.maps.Size(this.imgsize,this.imgsize));this.ggMarker=new google.maps.Marker({position:this.point,map:a}),this.ggMarker.setIcon(d),this.ggMarker.setTitle(this.nbr.toString()),c.extend(this.point);var e=this.ggMarker;google.maps.event.addListener(this.ggMarker,"click",function(){e.getMap().setCenter(e.getPosition()),setTimeout(function(){e.getMap().setZoom(e.getMap().getZoom()+1)},100)});var f=new Label({map:a,bgimg:this.icon,bgsize:this.imgsize});f.bindTo("position",this.ggMarker,"position"),f.set("text",this.nbr),f.bindTo("visible",this.ggMarker),f.bindTo("zIndex",this.ggMarker),b.push(this.ggMarker),b.push(f)},this.delete=function(){this.ggMarker&&this.ggMarker.setMap(null)}}function clsGfMarker(a,b){this.id=a.id,this.name=a.rt,this.lat=a.lat,this.lng=a.lng,this.curUser=a.cu,this.type=a.tl,this.level=0,1==b.niveaupresent&&(this.level=a.lv),this.liste=a.idL,this.distance=a.di,this.icon=a.mi,this.shadow=a.om,this.resizeh=parseInt(a.rh),this.resizew=parseInt(a.rw),this.zoomMe=a.zm,this.trace=a.tr,this.salesRad=a.sa,this.zindex=a.zi,this.factor=1,this.point=new google.maps.LatLng(parseFloat(this.lat),parseFloat(this.lng)),this.iconMarker=null,this.iconOmbre=null,this.ggMarker=null,this.ggCircle=null,this.clsGF=b,this.draw=function(a,b,c){this.prepareIcon(this.clsGF.imageShadow),this.ggMarker=new google.maps.Marker({map:a,position:this.point}),this.ggMarker.setIcon(this.iconMarker),this.ggMarker.setShadow(this.iconOmbre),this.ggMarker.setTitle(this.name),this.ggMarker.setZIndex(5e4-parseInt(this.zindex)),this.changeSize(),this.distance=getDistanceBetweenPoints(mj_radiuscenter,this.point),0==this.clsGF.clickSales&&(this.drawSalesArea(a,this.clsGF.radFact,!1,this.clsGF.colorSales),b.push(this.ggCircle));(this.clsGF.useMemberPos&&1==this.curUser||this.clsGF.exclusiveView&&1==this.zoomMe)&&this.clsGF.map.panTo(this.point),1==this.zoomMe&&(componentItemCenterPoint=this.point);var e=!!isInRadius(this);this.clsGF.useBoundary||(e=!(!e||!this.clsGF.map.getBounds().contains(this.ggMarker.getPosition()))),this.ggMarker.setVisible(e),this.ggCircle.setVisible(e),e?c.extend(this.point):numberofMarkers-=1;var f=this;return manageMarkerClick(this.clsGF,f),b.push(this.ggMarker),this},this.drawTrace=function(a){this.trace&&this.trace.length>3&&(this.ggTrace=new google.maps.KmlLayer(this.trace,{map:a,preserveViewport:!1,suppressInfoWindows:!0}))},this.drawSalesArea=function(a,b,c,d){if(lastSalesCircle&&c&&lastSalesCircle.setMap(null),!(this.salesRad&&this.salesRad<=0)){var e=this.salesRad*b;this.ggCircle=new google.maps.Circle({map:a,center:this.point,radius:e,strokeOpacity:1,strokeWeight:1,strokeColor:d,fillColor:d,fillOpacity:.15}),lastSalesCircle=this.ggCircle}},this.drawUniqueTrace=function(a,b){kmlGpsTool&&kmlGpsTool.setMap(null),this.trace&&this.trace.length>3&&(kmlGpsTool=new google.maps.KmlLayer(this.trace,{map:a,preserveViewport:b,suppressInfoWindows:!0}))},this.changeSize=function(){if(this.resizew>0&&this.resizew<100&&this.resizeh<1&&this.icon.length>3){obj=new Image;var a=this;obj.onload=function(){a.ggMarker.setIcon(new google.maps.MarkerImage(a.icon,null,null,null,new google.maps.Size(this.width*(a.resizew/100),this.height*(a.resizew/100))))},obj.src=this.icon}},this.prepareIcon=function(a){this.icon.length<1||(1==this.shadow&&(this.iconOmbre=new google.maps.MarkerImage(a,new google.maps.Size(20,20),new google.maps.Point(0,0),new google.maps.Point(10,10))),this.icon.length>3&&!isCustomSize(this.resizeh,this.resizew)?this.iconMarker=new google.maps.MarkerImage(this.icon):this.iconMarker=new google.maps.MarkerImage(this.icon,new google.maps.Size(this.resizew,this.resizeh),new google.maps.Point(0,0),new google.maps.Point(this.resizew/2,0),new google.maps.Size(this.resizew,this.resizeh)))}}function manageMarkerClick(a,b){3!=a.clickMarker&&google.maps.event.addListener(b.ggMarker,a.clickMarker,function(){-1!=b.distance&&(b.distance=Math.round(100*b.distance)/100,b.distance=b.distance+a.radUnit),iw.setContent(a.imageWait),iw.setOptions({maxWidth:b.width}),iw.open(a.map,b.ggMarker),panoramaOptions={position:b.ggMarker.getPosition(),navigationControl:!0,enableCloseButton:!0,addressControl:!0,linksControl:!1},manageBubbleLoad(a,b.point);var c="";if(isValidArray(a.sourceData.markers)){for(var d=0;d<a.sourceData.markers.length;d++)b.id!=a.sourceData.markers[d].id&&a.sourceData.markers[d].point.equals(b.point)&&(c=c+a.sourceData.markers[d].id+","+a.sourceData.markers[d].distance+",");""!=c&&(c=c+b.id+","+b.distance)}""==c?axGetBubble(iw,b.id,b.liste,b.distance,b.ggMarker,a.map,a.isDebugMode()):axGetMultiBubble(a.map,b.ggMarker,b.liste,c)}),0!=a.clickSales&&google.maps.event.addListener(b.ggMarker,a.clickSales,function(){b.drawSalesArea(a.map,a.radFact,!0,a.colorSales)}),3!=a.clickMarkerTrack&&(google.maps.event.addListener(b.ggMarker,a.clickMarkerTrack,function(){b.drawUniqueTrace(a.map,a.trackZoom)}),kmlGpsTool&&google.maps.event.addListener(kmlGpsTool,a.clickMarker,function(c){google.maps.event.trigger(b.ggMarker,a.clickMarker)}))}function manageBubbleLoad(a,b){google.maps.event.addListener(iw,"domready",function(){a.useTabs&&$(function(){$("#gftabs").tabs()}),jQuery("#gfdirws").click(function(){var c=jQuery("#"+a.nameTransport).val(),d=jQuery("#saddr").val(),e={origin:d,destination:b,travelMode:google.maps.TravelMode[c]};a.dirService.route(e,function(b,c){c==google.maps.DirectionsStatus.OK&&a.dirDisplay.setDirections(b)})}),jQuery("#gflmws").click(function(){var a=new google.maps.Geocoder;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(b){a.geocode({latLng:new google.maps.LatLng(b.coords.latitude,b.coords.longitude)},function(a,b){b==google.maps.GeocoderStatus.OK&&jQuery("#saddr").val(a[0].formatted_address)})}):alert("Your browser is not compatible")}),jQuery("#gflm").click(function(){if(navigator.geolocation)navigator.geolocation.getCurrentPosition(function(b){ptBrowserPos=new google.maps.LatLng(parseFloat(b.coords.latitude),parseFloat(b.coords.longitude)),onsuccessBrowserPos(a.map,ptBrowserPos,!0,a.iconMyPos),iw.close()});else if(google.gears){var b=google.gears.factory.create("beta.geolocation");b.getCurrentPosition(function(b){ptBrowserPos=new google.maps.LatLng(parseFloat(b.latitude),parseFloat(b.longitude)),onsuccessBrowserPos(a.map,ptBrowserPos,!0,a.iconMyPos),iw.close()})}else alert("Geocode not possible in this browser.")}),jQuery("#SV").click(function(){(new google.maps.StreetViewService).getPanoramaByLocation(panoramaOptions.position,49,function(b,c){if(c==google.maps.StreetViewStatus.OK){var d=new google.maps.StreetViewPanorama(document.getElementById(a.nameStreetView),panoramaOptions);a.map.setStreetView(d)}else jQuery("#"+a.nameStreetView).css("color","red"),jQuery("#"+a.nameStreetView).css("textAlign","center"),jQuery("#"+a.nameStreetView).html(a.idsNoStreetView)})})})}function clsGfPline(a,b){this.idA=a.id1,this.idB=a.id1,this.pointA=new google.maps.LatLng(parseFloat(a.x1),parseFloat(a.y1)),this.pointB=new google.maps.LatLng(parseFloat(a.x2),parseFloat(a.y2)),this.color=a.col,this.strokeWeight=1,this.useRoutePlaner=b.useRoutePlaner,this.nameTransport=b.nameTransport,this.dirService=b.dirService,this.dirDisplay=b.dirDisplay,this.draw=function(a,b){var c=[this.pointA,this.pointB],d=new google.maps.Polyline({path:c,geodesic:!0,strokeColor:this.color,strokeOpacity:1,strokeWeight:this.strokeWeight,zIndex:100,clickable:!1});d.setMap(a),this.addPlineListener(pline);var e=!(!isInRadius(this.pointA)||!isInRadius(this.pointB));d.setVisible(e),b.push(d)},this.addPlineListener=function(a){if(this.useRoutePlaner){a.setOptions({clickable:!0});var b=this;google.maps.event.addListener(a,"click",function(c){pts=a.getPath();var d=jQuery("#"+b.nameTransport).val(),e={origin:pts.getAt(0),destination:pts.getAt(1),travelMode:google.maps.TravelMode[d]};b.dirService.route(e,function(a,c){c==google.maps.DirectionsStatus.OK&&b.dirDisplay.setDirections(a)})});var c={strokeWeight:2*this.strokeWeight,strokeOpacity:1},d={strokeWeight:this.strokeWeight,strokeOpacity:.9};google.maps.event.addListener(a,"mouseover",function(){a.setOptions(c)}),google.maps.event.addListener(a,"mouseout",function(){a.setOptions(d)})}}}function clsGfSpecial(a,b){this.type=a.tl,this.liste=a.idL,this.icon=a.mi,this.resizeh=parseInt(a.rh),this.resizew=parseInt(a.rw),this.accom=a.pt,this.max=a.mx,this.open=a.op,this.mode=a.md,this.icon.length>0&&(void 0!==b[this.liste]&&this.icon.length>3&&(this.icon=b[this.liste]+this.icon),this.icon.length>3&&!isCustomSize(this.resizeh,this.resizew)?this.icon=new google.maps.MarkerImage(this.icon):this.icon=new google.maps.MarkerImage(this.icon,new google.maps.Size(this.resizew,this.resizeh),new google.maps.Point(0,0),new google.maps.Point(this.resizew/2,0),new google.maps.Size(this.resizew,this.resizeh)))}function clsGfList(a,b){this.id=a.id,this.name=a.name,this.type=a.type,this.useSide=a.useSide,this.bubblewidth=a.bubblewidth,this.plines=a.plines,this.commonIconPath=a.commonIconPath,this.level=0,1==b&&(this.level=a.level)}